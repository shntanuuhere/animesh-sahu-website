var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(s,a,l)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l;import{j as i}from"./index-D-hE1YEg.js";import{r as c}from"./react-vendor-3UH2GquY.js";function o(){const[e,o]=c.useState({email:"",phone:""}),[m,u]=c.useState(!1),[d,h]=c.useState(null),[p,j]=c.useState(""),x=i=>{var c,m;o((c=((e,s)=>{for(var a in s||(s={}))t.call(s,a)&&r(e,a,s[a]);if(l)for(var a of l(s))n.call(s,a)&&r(e,a,s[a]);return e})({},e),m={[i.target.name]:i.target.value},s(c,a(m))))};return i.jsxs("main",{className:"main",children:[i.jsx("section",{className:"page-header",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{className:"page-title",children:"Check Booking Status"}),i.jsx("p",{className:"page-subtitle",children:"Track your event booking"})]})}),i.jsx("section",{className:"check-status-content",children:i.jsx("div",{className:"container",children:i.jsxs("div",{className:"status-form-container",children:[p&&i.jsxs("div",{className:"error-message",children:["âœ— ",p]}),i.jsxs("form",{className:"status-form",onSubmit:s=>{return a=this,l=null,t=function*(){s.preventDefault(),u(!0),h(null),j("");try{const s=yield fetch(`https://bookingapi.hereco.xyz/api/booking?email=${encodeURIComponent(e.email)}&phone=${encodeURIComponent(e.phone)}`),a=yield s.json();if(!s.ok||!a.success)throw new Error("Failed to fetch booking");const l=a.bookings.find(s=>s.email.toLowerCase()===e.email.toLowerCase()&&s.phone===e.phone);if(!l)return void j("No booking found with these details. Please check your email and phone number.");h(l)}catch(a){j("Failed to check status. Please try again later.")}finally{u(!1)}},new Promise((e,n)=>{var r=e=>{try{c(t.next(e))}catch(s){n(s)}},i=e=>{try{c(t.throw(e))}catch(s){n(s)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,i);c((t=t.apply(a,l)).next())});var a,l,t},children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address *"}),i.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:e.email,onChange:x,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone Number *"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",className:"form-input",value:e.phone,onChange:x,required:!0})]}),i.jsx("button",{type:"submit",className:"btn btn-primary btn-large",disabled:m,children:m?"Checking...":"Check Status"})]}),d&&i.jsxs("div",{className:"result-card",children:[i.jsx("h3",{children:"Your Booking Details"}),i.jsx("div",{className:`status-badge-large status-${d.status}`,children:d.status.toUpperCase()}),i.jsxs("div",{className:"result-details",children:[i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Name"}),i.jsx("span",{className:"result-value",children:d.name})]}),i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Event Type"}),i.jsx("span",{className:"result-value",children:d.eventType.charAt(0).toUpperCase()+d.eventType.slice(1)})]}),i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Event Date"}),i.jsx("span",{className:"result-value",children:new Date(d.eventDate).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),d.guests&&i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Expected Guests"}),i.jsx("span",{className:"result-value",children:d.guests})]}),d.budget&&i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Budget Range"}),i.jsx("span",{className:"result-value",children:d.budget})]}),d.venue&&i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Venue"}),i.jsx("span",{className:"result-value",children:d.venue})]}),i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Booking ID"}),i.jsx("span",{className:"result-value booking-id",children:d._id})]}),i.jsxs("div",{className:"result-item",children:[i.jsx("span",{className:"result-label",children:"Submitted"}),i.jsx("span",{className:"result-value",children:new Date(d.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})})})]})}export{o as default};
